(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{747:function(e,t,o){Promise.resolve().then(o.bind(o,9233))},9233:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return E}});var i=o(7437),n=o(2265);let r={};r.DETACH=0,r.DNLOAD=1,r.UPLOAD=2,r.GETSTATUS=3,r.CLRSTATUS=4,r.GETSTATE=5,r.ABORT=6,r.appIDLE=0,r.appDETACH=1,r.dfuIDLE=2,r.dfuDNLOAD_SYNC=3,r.dfuDNBUSY=4,r.dfuDNLOAD_IDLE=5,r.dfuMANIFEST_SYNC=6,r.dfuMANIFEST=7,r.dfuMANIFEST_WAIT_RESET=8,r.dfuUPLOAD_IDLE=9,r.dfuERROR=10,r.STATUS_OK=0,r.Device=function(e,t){this.device_=e,this.settings=t,this.intfNumber=t.interface.interfaceNumber},r.findDeviceDfuInterfaces=function(e){let t=[];for(let o of e.configurations)for(let e of o.interfaces)for(let i of e.alternates)if(254==i.interfaceClass&&1==i.interfaceSubclass&&(1==i.interfaceProtocol||2==i.interfaceProtocol)){let n={configuration:o,interface:e,alternate:i,name:i.interfaceName};t.push(n)}return t},r.findAllDfuInterfaces=function(){return navigator.usb.getDevices().then(e=>{let t=[];for(let o of e)for(let e of r.findDeviceDfuInterfaces(o))t.push(new r.Device(o,e));return t})},r.Device.prototype.logDebug=function(e){console.log("logdebug: ",e)},r.Device.prototype.logInfo=function(e){console.log("logInfo: ",e)},r.Device.prototype.logWarning=function(e){console.log("logWarning: ",e)},r.Device.prototype.logError=function(e){console.log("logError: ",e)},r.Device.prototype.logProgress=function(e,t){void 0===t?console.log(e):console.log(e+"/"+t)},r.Device.prototype.open=async function(){await this.device_.open();let e=this.settings.configuration.configurationValue;(null===this.device_.configuration||this.device_.configuration.configurationValue!=e)&&await this.device_.selectConfiguration(e);let t=this.settings.interface.interfaceNumber;this.device_.configuration.interfaces[t].claimed||await this.device_.claimInterface(t);let o=this.settings.alternate.alternateSetting,i=this.device_.configuration.interfaces[t];(null===i.alternate||i.alternate.alternateSetting!=o)&&await this.device_.selectAlternateInterface(t,o)},r.Device.prototype.close=async function(){try{await this.device_.close()}catch(e){console.log(e)}},r.Device.prototype.readDeviceDescriptor=function(){return this.device_.controlTransferIn({requestType:"standard",recipient:"device",request:6,value:256,index:0},18).then(e=>"ok"==e.status?Promise.resolve(e.data):Promise.reject(e.status))},r.Device.prototype.readStringDescriptor=async function(e,t){void 0===t&&(t=0);let o={requestType:"standard",recipient:"device",request:6,value:768|e,index:t};var i=await this.device_.controlTransferIn(o,1);if("ok"==i.status){let e=i.data.getUint8(0);if("ok"==(i=await this.device_.controlTransferIn(o,e)).status){let o=(e-2)/2,n=[];for(let e=0;e<o;e++)n.push(i.data.getUint16(2+2*e,!0));return 0==t?n:String.fromCharCode.apply(String,n)}}throw"Failed to read string descriptor ".concat(e,": ").concat(i.status)},r.Device.prototype.readInterfaceNames=async function(){let e={},t=new Set;for(let o=0;o<this.device_.configurations.length;o++){let i=await this.readConfigurationDescriptor(o),n=r.parseConfigurationDescriptor(i),a=n.bConfigurationValue;for(let o of(e[a]={},n.descriptors))4==o.bDescriptorType&&(o.bInterfaceNumber in e[a]||(e[a][o.bInterfaceNumber]={}),e[a][o.bInterfaceNumber][o.bAlternateSetting]=o.iInterface,o.iInterface>0&&t.add(o.iInterface))}let o={};for(let e of t)try{o[e]=await this.readStringDescriptor(e,1033)}catch(t){console.log(t),o[e]=null}for(let t in e)for(let i in e[t])for(let n in e[t][i]){let r=e[t][i][n];e[t][i][n]=o[r]}return e},r.parseDeviceDescriptor=function(e){return{bLength:e.getUint8(0),bDescriptorType:e.getUint8(1),bcdUSB:e.getUint16(2,!0),bDeviceClass:e.getUint8(4),bDeviceSubClass:e.getUint8(5),bDeviceProtocol:e.getUint8(6),bMaxPacketSize:e.getUint8(7),idVendor:e.getUint16(8,!0),idProduct:e.getUint16(10,!0),bcdDevice:e.getUint16(12,!0),iManufacturer:e.getUint8(14),iProduct:e.getUint8(15),iSerialNumber:e.getUint8(16),bNumConfigurations:e.getUint8(17)}},r.parseConfigurationDescriptor=function(e){let t=new DataView(e.buffer.slice(9)),o=r.parseSubDescriptors(t);return{bLength:e.getUint8(0),bDescriptorType:e.getUint8(1),wTotalLength:e.getUint16(2,!0),bNumInterfaces:e.getUint8(4),bConfigurationValue:e.getUint8(5),iConfiguration:e.getUint8(6),bmAttributes:e.getUint8(7),bMaxPower:e.getUint8(8),descriptors:o}},r.parseInterfaceDescriptor=function(e){return{bLength:e.getUint8(0),bDescriptorType:e.getUint8(1),bInterfaceNumber:e.getUint8(2),bAlternateSetting:e.getUint8(3),bNumEndpoints:e.getUint8(4),bInterfaceClass:e.getUint8(5),bInterfaceSubClass:e.getUint8(6),bInterfaceProtocol:e.getUint8(7),iInterface:e.getUint8(8),descriptors:[]}},r.parseFunctionalDescriptor=function(e){return{bLength:e.getUint8(0),bDescriptorType:e.getUint8(1),bmAttributes:e.getUint8(2),wDetachTimeOut:e.getUint16(3,!0),wTransferSize:e.getUint16(5,!0),bcdDFUVersion:e.getUint16(7,!0)}},r.parseSubDescriptors=function(e){let t;let o=e,i=[],n=!1;for(;o.byteLength>2;){let e=o.getUint8(0),a=o.getUint8(1),s=new DataView(o.buffer.slice(0,e));if(4==a)n=254==(t=r.parseInterfaceDescriptor(s)).bInterfaceClass&&1==t.bInterfaceSubClass,i.push(t);else if(n&&33==a){let e=r.parseFunctionalDescriptor(s);i.push(e),t.descriptors.push(e)}else{let o={bLength:e,bDescriptorType:a,data:s};i.push(o),t&&t.descriptors.push(o)}o=new DataView(o.buffer.slice(e))}return i},r.Device.prototype.readConfigurationDescriptor=function(e){let t=512|e;return this.device_.controlTransferIn({requestType:"standard",recipient:"device",request:6,value:t,index:0},4).then(e=>{if("ok"!=e.status)return Promise.reject(e.status);{let o=e.data.getUint16(2,!0);return this.device_.controlTransferIn({requestType:"standard",recipient:"device",request:6,value:t,index:0},o)}}).then(e=>"ok"==e.status?Promise.resolve(e.data):Promise.reject(e.status))},r.Device.prototype.requestOut=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.device_.controlTransferOut({requestType:"class",recipient:"interface",request:e,value:o,index:this.intfNumber},t).then(e=>"ok"==e.status?Promise.resolve(e.bytesWritten):Promise.reject(e.status),e=>Promise.reject("ControlTransferOut failed: "+e))},r.Device.prototype.requestIn=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return console.log("requestIn: ",e,t,o),this.device_.controlTransferIn({requestType:"class",recipient:"interface",request:e,value:o,index:this.intfNumber},t).then(e=>"ok"==e.status?Promise.resolve(e.data):Promise.reject(e.status),e=>Promise.reject("ControlTransferIn failed: "+e))},r.Device.prototype.detach=function(){return this.requestOut(r.DETACH,void 0,1e3)},r.Device.prototype.waitDisconnected=async function(e){let t=this,o=this.device_;return new Promise(function(i,n){let r;e>0&&(r=setTimeout(n,e)),navigator.usb.addEventListener("disconnect",function n(a){a.device===o&&(e>0&&clearTimeout(r),t.disconnected=!0,navigator.usb.removeEventListener("disconnect",n),a.stopPropagation(),i(t))})})},r.Device.prototype.download=function(e,t){return this.requestOut(r.DNLOAD,e,t)},r.Device.prototype.dnload=r.Device.prototype.download,r.Device.prototype.upload=function(e,t){return this.requestIn(r.UPLOAD,e,t)},r.Device.prototype.clearStatus=function(){return this.requestOut(r.CLRSTATUS)},r.Device.prototype.clrStatus=r.Device.prototype.clearStatus,r.Device.prototype.getStatus=function(){return this.requestIn(r.GETSTATUS,6).then(e=>Promise.resolve({status:e.getUint8(0),pollTimeout:16777215&e.getUint32(1,!0),state:e.getUint8(4)}),e=>Promise.reject("DFU GETSTATUS failed: "+e))},r.Device.prototype.getState=function(){return this.requestIn(r.GETSTATE,1).then(e=>Promise.resolve(e.getUint8(0)),e=>Promise.reject("DFU GETSTATE failed: "+e))},r.Device.prototype.abort=function(){return this.requestOut(r.ABORT)},r.Device.prototype.abortToIdle=async function(){await this.abort();let e=await this.getState();if(e==r.dfuERROR&&(await this.clearStatus(),e=await this.getState()),e!=r.dfuIDLE)throw"Failed to return to idle state after abort: state "+e.state},r.Device.prototype.do_upload=async function(e){let t,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=n,a=[],s=0;this.logInfo("Copying data from DFU device to browser"),this.logProgress(0);do o=Math.min(e,i-s),t=await this.upload(o,r++),this.logDebug("Read "+t.byteLength+" bytes"),t.byteLength>0&&(a.push(t),s+=t.byteLength),Number.isFinite(i)?this.logProgress(s,i):this.logProgress(s);while(s<i&&t.byteLength==o);return s==i&&await this.abortToIdle(),this.logInfo("Read ".concat(s," bytes")),new Blob(a,{type:"application/octet-stream"})},r.Device.prototype.poll_until=async function(e){console.log("DEVICE poll_until getStatus");let t=await this.getStatus();console.log("dfu_status: ",t);let o=this;for(console.log("DEVICE poll_until");!e(t.state)&&t.state!=r.dfuERROR;)await function(e){return new Promise(function(t,i){o.logDebug("Sleeping for "+e+"ms"),setTimeout(t,e)})}(t.pollTimeout),console.log("dfu_status: ",t=await this.getStatus());return t},r.Device.prototype.poll_until_idle=function(e){return this.poll_until(t=>t==e)},r.Device.prototype.do_download=async function(e,t,o){let i=0,n=t.byteLength,a=0;for(this.logInfo("Copying data from browser to DFU device"),this.logProgress(i,n);i<n;){let o;let s=Math.min(n-i,e),c=0;try{c=await this.download(t.slice(i,i+s),a++),this.logDebug("Sent "+c+" bytes"),o=await this.poll_until_idle(r.dfuDNLOAD_IDLE)}catch(e){throw"Error during DFU download: "+e}if(o.status!=r.STATUS_OK)throw"DFU DOWNLOAD failed state=".concat(o.state,", status=").concat(o.status);this.logDebug("Wrote "+c+" bytes"),i+=c,this.logProgress(i,n)}this.logDebug("Sending empty block");try{await this.download(new ArrayBuffer([]),a++)}catch(e){throw"Error during final DFU download: "+e}if(this.logInfo("Wrote "+i+" bytes"),this.logInfo("Manifesting new firmware dfu.js"),o){let e;console.log("manifestationTolerant");try{if((e=await this.poll_until(e=>e==r.dfuIDLE||e==r.dfuMANIFEST_WAIT_RESET)).state==r.dfuMANIFEST_WAIT_RESET&&this.logDebug("Device transitioned to MANIFEST_WAIT_RESET even though it is manifestation tolerant"),e.status!=r.STATUS_OK)throw"DFU MANIFEST failed state=".concat(e.state,", status=").concat(e.status)}catch(e){if(e.endsWith("ControlTransferIn failed: NotFoundError: Device unavailable.")||e.endsWith("ControlTransferIn failed: NotFoundError: The device was disconnected."))this.logWarning("Unable to poll final manifestation status");else throw"Error during DFU manifest: "+e}}else{console.log("NO manifestationTolerant");try{let e=await this.getStatus();this.logDebug("Final DFU status: state=".concat(e.state,", status=").concat(e.status))}catch(e){this.logDebug("Manifest GET_STATUS poll error: "+e)}}try{await this.device_.reset()}catch(e){if("NetworkError: Unable to reset the device."==e||"NotFoundError: Device unavailable."==e||"NotFoundError: The device was disconnected."==e)this.logDebug("Ignored reset error");else throw"Error during reset for manifestation: "+e}};let a={};a.GET_COMMANDS=0,a.SET_ADDRESS=33,a.ERASE_SECTOR=65,a.Device=function(e,t){r.Device.call(this,e,t),this.memoryInfo=null,this.startAddress=NaN,t.name&&(console.log("parseMemoryDescriptor"),this.memoryInfo=a.parseMemoryDescriptor(t.name))},a.Device.prototype=Object.create(r.Device.prototype),a.Device.prototype.constructor=a.Device,a.parseMemoryDescriptor=function(e){let t;let o=e.indexOf("/");if(!e.startsWith("@")||-1==o)throw'Not a DfuSe memory descriptor: "'.concat(e,'"');let i=e.substring(1,o).trim(),n=e.substring(o),r=[],a={" ":1,B:1,K:1024,M:1048576},s=/\/\s*(0x[0-9a-fA-F]{1,8})\s*\/(\s*[0-9]+\s*\*\s*[0-9]+\s?[ BKM]\s*[abcdefg]\s*,?\s*)+/g;for(;t=s.exec(n);){let e,o=/([0-9]+)\s*\*\s*([0-9]+)\s?([ BKM])\s*([abcdefg])\s*,?\s*/g,i=parseInt(t[1],16);for(;e=o.exec(t[0]);){let t={},o=parseInt(e[1],10),n=parseInt(e[2])*a[e[3]],s=e[4].charCodeAt(0)-97+1;t.start=i,t.sectorSize=n,t.end=i+n*o,t.readable=(1&s)!=0,t.erasable=(2&s)!=0,t.writable=(4&s)!=0,r.push(t),i+=n*o}}return{name:i,segments:r}},a.Device.prototype.dfuseCommand=async function(e,t,o){void 0===t&&void 0===o&&(t=0,o=1);let i=new ArrayBuffer(o+1),n=new DataView(i);if(n.setUint8(0,e),1==o)n.setUint8(1,t);else if(4==o)n.setUint32(1,t,!0);else throw"Don't know how to handle data of len "+o;try{await this.download(i,0)}catch(t){throw"Error during special DfuSe command "+({0:"GET_COMMANDS",33:"SET_ADDRESS",65:"ERASE_SECTOR"})[e]+":"+t}if((await this.poll_until(e=>e!=r.dfuDNBUSY)).status!=r.STATUS_OK)throw"Special DfuSe command "+commandName+" failed"},a.Device.prototype.getSegment=function(e){if(!this.memoryInfo||!this.memoryInfo.segments)throw"No memory map information available";for(let t of this.memoryInfo.segments)if(t.start<=e&&e<t.end)return t;return null},a.Device.prototype.getSectorStart=function(e,t){if(void 0===t&&(t=this.getSegment(e)),!t)throw"Address ".concat(e.toString(16)," outside of memory map");let o=Math.floor((e-t.start)/t.sectorSize);return t.start+o*t.sectorSize},a.Device.prototype.getSectorEnd=function(e,t){if(void 0===t&&(t=this.getSegment(e)),!t)throw"Address ".concat(e.toString(16)," outside of memory map");let o=Math.floor((e-t.start)/t.sectorSize);return t.start+(o+1)*t.sectorSize},a.Device.prototype.getFirstWritableSegment=function(){if(!this.memoryInfo||!this.memoryInfo.segments)throw"No memory map information available";for(let e of this.memoryInfo.segments)if(e.writable)return e;return null},a.Device.prototype.getMaxReadSize=function(e){if(!this.memoryInfo||!this.memoryInfo.segments)throw"No memory map information available";let t=0;for(let o of this.memoryInfo.segments)if(o.start<=e&&e<o.end){if(!o.readable)return 0;t+=o.end-e}else if(o.start==e+t){if(o.readable)t+=o.end-o.start;else break}return t},a.Device.prototype.erase=async function(e,t){let o=this.getSegment(e),i=this.getSectorStart(e,o),n=this.getSectorEnd(e+t-1),r=0,s=n-i;for(s>0&&this.logProgress(r,s);i<n;){if(o.end<=i&&(o=this.getSegment(i)),!o.erasable){r=Math.min(r+o.end-i,s),i=o.end,this.logProgress(r,s);continue}let e=Math.floor((i-o.start)/o.sectorSize),t=o.start+e*o.sectorSize;this.logDebug("Erasing ".concat(o.sectorSize,"B at 0x").concat(t.toString(16))),await this.dfuseCommand(a.ERASE_SECTOR,t,4),i=t+o.sectorSize,r+=o.sectorSize,this.logProgress(r,s)}},a.Device.prototype.do_download=async function(e,t,o){if(!this.memoryInfo||!this.memoryInfo.segments)throw"No memory map available";this.logInfo("Erasing DFU device memory");let i=0,n=t.byteLength,s=this.startAddress;isNaN(s)?(s=this.memoryInfo.segments[0].start,this.logWarning("Using inferred start address 0x"+s.toString(16))):null===this.getSegment(s)&&this.logError("Start address 0x".concat(s.toString(16)," outside of memory map bounds")),await this.erase(s,n),this.logInfo("Copying data from browser to DFU device");let c=s;for(;i<n;){let o;let s=Math.min(n-i,e),l=0;try{await this.dfuseCommand(a.SET_ADDRESS,c,4),this.logDebug("Set address to 0x".concat(c.toString(16))),l=await this.download(t.slice(i,i+s),2),this.logDebug("Sent "+l+" bytes"),o=await this.poll_until_idle(r.dfuDNLOAD_IDLE),c+=s}catch(e){throw"Error during DfuSe download: "+e}if(o.status!=r.STATUS_OK)throw"DFU DOWNLOAD failed state=".concat(o.state,", status=").concat(o.status);this.logDebug("Wrote "+l+" bytes"),i+=l,this.logProgress(i,n)}this.logInfo("Wrote ".concat(i," bytes")),this.logInfo("Manifesting new firmware dfuse.js");try{console.log("Manifesting address"),console.log("Manifesting address",a.SET_ADDRESS,s),await this.dfuseCommand(a.SET_ADDRESS,s,4),await this.download(new ArrayBuffer,0)}catch(e){throw"Error during DfuSe manifestation: "+e}try{console.log("Manifesting poll_until",this.device),console.trace(),await this.poll_until(e=>e==r.dfuMANIFEST)}catch(e){this.logError(e)}},a.Device.prototype.do_upload=async function(e,t){let o=this.startAddress;return isNaN(o)?(o=this.memoryInfo.segments[0].start,this.logWarning("Using inferred start address 0x"+o.toString(16))):null===this.getSegment(o)&&this.logWarning("Start address 0x".concat(o.toString(16)," outside of memory map bounds")),this.logInfo("Reading up to 0x".concat(t.toString(16)," bytes starting at 0x").concat(o.toString(16))),await this.getState()!=r.dfuIDLE&&await this.abortToIdle(),await this.dfuseCommand(a.SET_ADDRESS,o,4),await this.abortToIdle(),await r.Device.prototype.do_upload.call(this,e,t,2)};var s=o(9671),c=o.n(s);let l=async function(e,t){if(t.some(e=>null==e.name)){let o=new r.Device(e,t[0]);await o.device_.open(),await o.device_.selectConfiguration(1);let i=await o.readInterfaceNames();for(let e of(await o.close(),t))if(null===e.name){let t=e.configuration.configurationValue,o=e.interface.interfaceNumber,n=e.alternate.alternateSetting;e.name=i[t][o][n]}}},u=function(e){console.log(e)},f=function(e){},d=function(e){},g=function(e){},h=function(e,t){};async function p(e){try{let t=await fetch("/".concat(e));if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return await t.arrayBuffer()}catch(e){return console.error("Failed to load binary file:",e),null}}let m=async(e,t)=>{try{await e.open()}catch(e){throw D(e),e}let o={};try{var i;o=await (i=e).readConfigurationDescriptor(0).then(e=>{let t=r.parseConfigurationDescriptor(e),o=null,n=i.settings.configuration.configurationValue;if(t.bConfigurationValue==n){for(let e of t.descriptors)if(33==e.bDescriptorType&&e.hasOwnProperty("bcdDFUVersion")){o=e;break}}return o?{WillDetach:(8&o.bmAttributes)!=0,ManifestationTolerant:(4&o.bmAttributes)!=0,CanUpload:(2&o.bmAttributes)!=0,CanDnload:(1&o.bmAttributes)!=0,TransferSize:o.wTransferSize,DetachTimeOut:o.wDetachTimeOut,DFUVersion:o.bcdDFUVersion}:{}},e=>{})}catch(e){throw D(e),e}if(o&&Object.keys(o).length>0&&(e.properties=o,o.CanDnload&&t(o.ManifestationTolerant),282==o.DFUVersion&&2==e.settings.alternate.interfaceProtocol&&(e=new a.Device(e.device_,e.settings))),e.logDebug=u,e.logInfo=f,e.logWarning=d,e.logError=g,e.logProgress=h,e.memoryInfo){let t=e.getFirstWritableSegment();t&&(2415919104===t.start&&(t.start+=262144),e.startAddress=t.start)}return e},D=()=>{console.log("DISCONNECTED")},y=async(e,t,o)=>{e&&(e.close().then(D),e=null),navigator.usb.requestDevice({filters:[]}).then(async e=>{let i=r.findDeviceDfuInterfaces(e);if(0==i.length)statusDisplay.textContent="The selected device does not have any USB DFU interfaces.";else if(1==i.length)await l(e,i),t(await m(new r.Device(e,i[0]),o));else{async function n(){let n=i.filter(e=>e.name.includes("0x08000000"));0===n.length?(console.log("No interace with flash address 0x08000000 found."),statusDisplay.textContent="The selected device does not have a Flash Memory sectiona at address 0x08000000."):t(await m(new r.Device(e,n[0]),o))}await l(e,i),await n()}}).catch(e=>{console.log(e)})},v=async(e,t,o,i)=>{if(console.log("PROGRAM"),e&&null!=o){try{(await e.getStatus()).state==r.dfuERROR&&await e.clearStatus()}catch(t){e.logWarning("Failed to clear status")}await e.do_download(1024,o,i).then(()=>{console.log("PROGRAM DONE"),i||e.waitDisconnected(5e3).then(e=>{D(),t(null)},e=>{console.log("Device unexpectedly tolerated manifestation.")})},e=>{console.log("PROGRAM ERROR"),console.log(e)})}};var b=o(7088);let S="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",w=new b.v({auth:S});new b.v({});var _=function(){let[e,t]=(0,n.useState)([]),[o,r]=(0,n.useState)(""),[a,s]=(0,n.useState)(null);(0,n.useEffect)(()=>{c()},[]);let c=async()=>{try{let{data:e}=await w.repos.listReleases({owner:"symbiosdotwiki",repo:"metal-fetishist-demo-releases"});t(e)}catch(e){console.error("Failed to fetch releases:",e)}},l=async()=>{if(!o)return;let t=e.find(e=>e.tag_name===o);if(!t)return;let i=t.assets.find(e=>e.name.endsWith(".bin"));if(!i){console.error("No .bin file found in this release");return}try{let e="token ".concat(S);console.log(e,i.url);let t=await fetch(i.url,{headers:{Authorization:e,Accept:"application/octet-stream"}}),{data:o}=t,n=await t.arrayBuffer();s(n),console.log("Bin file loaded into memory. Size: ".concat(n.byteLength," bytes"))}catch(e){console.error("Failed to fetch .bin file:",e)}};return(0,i.jsxs)("div",{children:[(0,i.jsxs)("select",{value:o,onChange:e=>{r(e.target.value),s(null)},children:[(0,i.jsx)("option",{value:"",children:"Select a release"}),e.map(e=>(0,i.jsx)("option",{value:e.tag_name,children:e.name||e.tag_name},e.id))]}),o&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{children:["Selected release: ",o]}),(0,i.jsx)("button",{onClick:l,children:"Load .bin file into memory"})]}),a&&(0,i.jsxs)("p",{children:["Bin file loaded into memory. Size: ",a.byteLength," bytes"]})]})};let T=o(357).env.NEXT_PUBLIC_BASE_PATH;function E(){let[e,t]=(0,n.useState)(null),[o,r]=(0,n.useState)(""),[a,s]=(0,n.useState)(null),[l,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{!async function(){let e=await p(T+"blink-versions/blink-v2.bin");e&&(u(e),console.log(e))}()},[]);let f=async()=>{await y(e,t,s)},d=async()=>{console.log(e),v(e,t,l,a)};return(0,i.jsx)("main",{className:c().main,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"DFU Device Manager"}),(0,i.jsx)("button",{onClick:f,children:"Connect to Device"}),l&&e?(0,i.jsx)("button",{onClick:d,children:"Program Device"}):"",(0,i.jsx)(_,{})]})})}},9671:function(e){e.exports={main:"page_main__GlU4n",description:"page_description__86bsR",code:"page_code__9lUUd",grid:"page_grid__f5Kdy",card:"page_card__QV0Om",center:"page_center__5oHG7",logo:"page_logo__7fc9l",content:"page_content__kDoxQ",vercelLogo:"page_vercelLogo__rOY_u",rotate:"page_rotate__durgN"}}},function(e){e.O(0,[967,88,971,23,744],function(){return e(e.s=747)}),_N_E=e.O()}]);